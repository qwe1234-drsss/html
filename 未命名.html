<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ä¸ªäººæˆé•¿æ§åˆ¶å° V1.0</title>

<style>
  :root {
    --bg: #f5f5f7;
    --card-bg: #ffffff;
    --primary: #2563eb;
    --primary-soft: #e0edff;
    --border: #e2e8f0;
    --text-main: #111827;
    --text-sub: #6b7280;
    --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.08);
    --radius-lg: 14px;
    --radius-md: 10px;
    --radius-sm: 8px;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 24px;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui,
      -system-ui, "PingFang SC", "Helvetica Neue", Arial, sans-serif;
    background: radial-gradient(circle at top left, #e0edff 0, #f5f5f7 40%, #fafafa 100%);
    color: var(--text-main);
  }

  .app-shell {
    max-width: 1100px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.85);
    border-radius: 24px;
    box-shadow: 0 24px 70px rgba(15, 23, 42, 0.14);
    backdrop-filter: blur(18px);
    padding: 18px 22px 26px;
  }

  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(148, 163, 184, 0.35);
    margin-bottom: 12px;
  }

  .title-block h1 {
    font-size: 20px;
    margin: 0 0 4px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .title-block h1 span {
    font-size: 22px;
  }

  .title-block p {
    margin: 0;
    font-size: 13px;
    color: var(--text-sub);
  }

  .nav-tabs {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .nav-btn {
    border-radius: 999px;
    border: 1px solid transparent;
    background: #eef2ff;
    color: #312e81;
    padding: 6px 14px;
    font-size: 13px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.18s ease;
  }

  .nav-btn span.icon {
    font-size: 16px;
  }

  .nav-btn.active {
    background: #1d4ed8;
    color: #eff6ff;
    border-color: #1d4ed8;
    box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
  }

  .nav-btn:not(.active):hover {
    background: #e0ebff;
    transform: translateY(-1px);
  }

  main {
    margin-top: 6px;
  }

  .page {
    display: none;
    animation: fadeIn 0.25s ease;
  }

  .page.active {
    display: block;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* ==== æ€ç»´å¯¼å›¾å¡ç‰‡åŒºåŸŸ ==== */
  .mindmap-container {
    padding: 12px 6px 6px;
  }

  .node {
    position: relative;
    padding: 10px 14px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    cursor: pointer;
    margin-top: 10px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06);
    transition: all 0.18s ease;
    user-select: none;
  }

  .node-pill {
    display: inline-flex;
    background: var(--primary-soft);
    border-radius: 999px;
    padding: 4px 10px;
    font-size: 12px;
    color: #1d4ed8;
  }

  .node:hover {
    transform: translateY(-1px);
    box-shadow: 0 14px 28px rgba(15, 23, 42, 0.12);
  }

  .node-main {
    font-weight: 600;
  }

  .children {
    margin-left: 24px;
    margin-top: 4px;
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transition: max-height 0.25s ease, opacity 0.25s ease;
  }

  .children.open {
    max-height: 600px;
    opacity: 1;
  }

  .child-card {
    margin-top: 8px;
    padding: 8px 12px;
    background: #f9fafb;
    border-radius: var(--radius-md);
    border: 1px dashed #d1d5db;
    font-size: 13px;
    color: #111827;
  }

  .child-card small {
    display: block;
    font-size: 11px;
    color: var(--text-sub);
    margin-top: 2px;
  }

  .node-toggle-indicator {
    width: 14px;
    height: 14px;
    border-radius: 999px;
    border: 1px solid #cbd5f5;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: #4b5563;
  }

  .node.open .node-toggle-indicator {
    background: #2563eb;
    color: white;
    border-color: #2563eb;
  }

  .node.main {
    padding: 11px 16px;
    background: linear-gradient(120deg, #1d4ed8, #6366f1);
    color: white;
    border-color: transparent;
  }

  .node.main .node-toggle-indicator {
    border-color: rgba(255, 255, 255, 0.6);
    color: #e5e7eb;
  }

  .node.main .node-pill {
    background: rgba(15, 23, 42, 0.2);
    color: #e0e7ff;
  }

  /* å¯æ‹–æ‹½èŠ‚ç‚¹ï¼ˆç”µè„‘ç«¯ï¼‰ */
  @media (min-width: 900px) {
    .draggable {
      cursor: grab;
    }
    .draggable:active {
      cursor: grabbing;
    }
    .mindmap-free-layout {
      position: relative;
      min-height: 260px;
      margin-top: 18px;
      border-radius: 18px;
      border: 1px dashed #cbd5f5;
      padding: 14px;
      background: radial-gradient(circle at top left, #e0ecff, #f8fafc);
    }
    .mindmap-free-layout .draggable {
      position: absolute;
    }
  }

  /* ==== å‘¨æŠ¥è®°å½•é¡µé¢ ==== */

  .grid-two {
    display: grid;
    grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.3fr);
    gap: 16px;
  }

  .card {
    background: var(--card-bg);
    border-radius: 18px;
    border: 1px solid var(--border);
    padding: 14px 16px 16px;
    box-shadow: var(--shadow-soft);
  }

  .card h3 {
    margin: 0 0 8px;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .card p.desc {
    margin: 0 0 8px;
    font-size: 12px;
    color: var(--text-sub);
  }

  label {
    font-size: 12px;
    color: var(--text-sub);
    display: block;
    margin-bottom: 4px;
  }

  input[type="date"],
  select,
  textarea {
    width: 100%;
    padding: 6px 8px;
    border-radius: 9px;
    border: 1px solid #d1d5db;
    font-size: 13px;
    font-family: inherit;
    resize: vertical;
    min-height: 32px;
    background: #f9fafb;
  }

  textarea {
    min-height: 76px;
  }

  .field-row {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 8px;
    margin-bottom: 8px;
  }

  .btn {
    border-radius: 999px;
    border: none;
    font-size: 13px;
    padding: 6px 14px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: all 0.18s ease;
  }

  .btn-primary {
    background: #2563eb;
    color: white;
  }

  .btn-primary:hover {
    background: #1d4ed8;
    box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
  }

  .btn-ghost {
    background: #f3f4f6;
    color: #374151;
  }

  .btn-ghost:hover {
    background: #e5e7eb;
  }

  .log-list {
    max-height: 260px;
    overflow-y: auto;
    margin-top: 6px;
    padding-right: 4px;
  }

  .log-item-date {
    font-size: 12px;
    color: var(--text-sub);
    margin-top: 8px;
    margin-bottom: 2px;
  }

  .pill {
    display: inline-flex;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 10px;
    background: #e0f2fe;
    color: #075985;
    margin-right: 6px;
  }

  .log-item {
    font-size: 12px;
    padding: 4px 0;
    border-bottom: 1px dashed #e5e7eb;
  }

  .export-area {
    margin-top: 6px;
  }

  .export-area textarea {
    min-height: 140px;
    font-size: 12px;
  }

  .hint {
    font-size: 11px;
    color: var(--text-sub);
    margin-top: 4px;
  }

  /* è¯´æ˜é¡µ */
  .steps-list {
    font-size: 13px;
    color: #111827;
    padding-left: 18px;
  }

  .steps-list li {
    margin-bottom: 4px;
  }

  .badge {
    display: inline-flex;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 11px;
    background: #ecfeff;
    color: #0e7490;
    margin-left: 4px;
  }

  @media (max-width: 780px) {
    .app-shell {
      padding: 16px 12px 18px;
      border-radius: 0;
      box-shadow: none;
    }
    header {
      flex-direction: column;
      align-items: flex-start;
    }
    .grid-two {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>
<div class="app-shell">
  <header>
    <div class="title-block">
      <h1><span>ğŸ“Œ</span> ä¸ªäººæˆé•¿æ§åˆ¶å° <span style="font-size:13px;color:#6b7280;">V1.0</span></h1>
      <p>é‡åŒ– Â· è‡ªåŠ¨åŒ– Â· Web Â· è®¤çŸ¥ï¼Œä¸€é¡µç»Ÿç­¹ã€‚</p>
    </div>
    <div class="nav-tabs">
      <button class="nav-btn active" data-page="page-roadmap">
        <span class="icon">ğŸ—ºï¸</span> æˆé•¿è·¯çº¿å›¾
      </button>
      <button class="nav-btn" data-page="page-weekly">
        <span class="icon">ğŸ“</span> å‘¨æŠ¥è®°å½•
      </button>
      <button class="nav-btn" data-page="page-help">
        <span class="icon">âš™ï¸</span> ä½¿ç”¨è¯´æ˜
      </button>
    </div>
  </header>

  <main>
    <!-- é¡µé¢ 1ï¼šæˆé•¿è·¯çº¿å›¾ -->
    <section class="page active" id="page-roadmap">
      <div class="mindmap-container">
        <!-- ä¸»èŠ‚ç‚¹ï¼šé‡åŒ–äº¤æ˜“ -->
        <div class="node main" data-node="n1">
          <div class="node-toggle-indicator">+</div>
          <div class="node-main">ğŸ“˜ é‡åŒ–äº¤æ˜“</div>
          <span class="node-pill">ä¸­å‘¨æœŸ Â· å®‰å…¨ä¼˜å…ˆ</span>
        </div>
        <div class="children" id="n1">
          <div class="child-card">
            å‘¨æœŸï¼š30m / 10m / 5m  
            <small>ç”¨ 30 åˆ†é’Ÿçœ‹ä¸»è¶‹åŠ¿ï¼Œ10 åˆ†é’Ÿç¡®è®¤ç»“æ„ï¼Œ5 åˆ†é’Ÿå¯»æ‰¾å…¥åœºç‚¹ã€‚</small>
          </div>
          <div class="child-card">
            æŠ€æœ¯æŒ‡æ ‡ï¼šMACD / å‡çº¿ / å¤šå‘¨æœŸå…±æŒ¯  
            <small>é¿å… 1 åˆ†é’Ÿçº§åˆ«å™ªéŸ³ï¼Œä¸“æ³¨é«˜è´¨é‡ä¿¡å·ã€‚</small>
          </div>
          <div class="child-card">
            é£é™©ç®¡ç†ï¼šä¸åŠ æ æ† / æ­¢æŸç­–ç•¥  
            <small>æœŸè´§å¯ä»¥ä¸å½“èµŒåšå·¥å…·ï¼Œè€Œæ˜¯å®‰å…¨æ”¾å¤§æ”¶ç›Šå·¥å…·ã€‚</small>
          </div>
        </div>

        <!-- ä¸»èŠ‚ç‚¹ï¼šæŠ€æœ¯èƒ½åŠ› -->
        <div class="node main" data-node="n2">
          <div class="node-toggle-indicator">+</div>
          <div class="node-main">ğŸ’» æŠ€æœ¯èƒ½åŠ›</div>
          <span class="node-pill">Python Â· Web Â· å·¥ä½œæµ</span>
        </div>
        <div class="children" id="n2">
          <div class="child-card">
            Pythonï¼šè‡ªåŠ¨åŒ–äº¤æ˜“ + æ•°æ®å¤„ç†  
            <small>ç­–ç•¥å›æµ‹ã€æ•°æ®æ¸…æ´—ã€é£æ§é€»è¾‘çš„ä¸»è¯­è¨€ã€‚</small>
          </div>
          <div class="child-card">
            Webï¼šDashboard / æ§åˆ¶å° / å·¥å…·é¡µé¢  
            <small>æŠŠä½ çš„ç­–ç•¥ã€å·¥ä½œæµã€å¤ç›˜é¢æ¿éƒ½åšæˆå°åº”ç”¨ã€‚</small>
          </div>
          <div class="child-card">
            å·¥ä½œæµï¼šAI é›†æˆ + è‡ªåŠ¨åŒ–ä»»åŠ¡é“¾  
            <small>è®© AI å’Œè„šæœ¬ä»£æ›¿ä½ å®Œæˆé‡å¤åŠ³åŠ¨ï¼Œä½ åªåšå†³ç­–ã€‚</small>
          </div>
        </div>

        <!-- ä¸»èŠ‚ç‚¹ï¼šè®¤çŸ¥æˆé•¿ -->
        <div class="node main" data-node="n3">
          <div class="node-toggle-indicator">+</div>
          <div class="node-main">ğŸ§  è®¤çŸ¥æˆé•¿</div>
          <span class="node-pill">é•¿æœŸ Â· å¤åˆ© Â· è¶…çº§ä¸ªä½“</span>
        </div>
        <div class="children" id="n3">
          <div class="child-card">
            é•¿æœŸä¸»ä¹‰ & å¤åˆ©æ€ç»´  
            <small>ç­–ç•¥ã€æŠ€èƒ½ã€å…³ç³»ã€å¥åº·éƒ½æ‹‰é•¿æ—¶é—´ç»´åº¦å»çœ‹ã€‚</small>
          </div>
          <div class="child-card">
            èƒ½åŠ›å åŠ  â†’ è¶…çº§ä¸ªä½“æˆ˜ç•¥  
            <small>äº¤æ˜“ + æŠ€æœ¯ + è‡ªåŠ¨åŒ– + å†™ä½œ / æ±‡æŠ¥ï¼Œç»„åˆå‡ºç¨€ç¼ºæ€§ã€‚</small>
          </div>
          <div class="child-card">
            è‡ªåŠ¨åŒ– = æ”¾å¤§æ—¶é—´ä»·å€¼  
            <small>èŠ‚çœçš„ä¸æ˜¯ 3 å°æ—¶ï¼Œè€Œæ˜¯ä¸€æ•´æ¡å¯å¤åˆ©çš„äººç”Ÿæ›²çº¿ã€‚</small>
          </div>
        </div>

        <!-- ç”µè„‘ç«¯æ‹–æ‹½åŒºåŸŸï¼ˆå¯é€‰ç©å…·ï¼‰ -->
        <div class="mindmap-free-layout" id="free-layout" style="display:none;">
          <div class="node draggable" style="top:10px;left:10px;">ğŸ¯ ç›®æ ‡ï¼šå¹´åŒ– 30ï½50%</div>
          <div class="node draggable" style="top:90px;left:160px;">ğŸ“š æŠ€èƒ½å åŠ </div>
          <div class="node draggable" style="top:180px;left:40px;">ğŸ¤– è‡ªåŠ¨åŒ– + æ™ºèƒ½ä½“</div>
        </div>
        <p class="hint" style="margin-top:10px;">
          ğŸ“ æç¤ºï¼šç‚¹å‡»è“è‰²ä¸»èŠ‚ç‚¹å¯å±•å¼€/æŠ˜å è¯¦ç»†è¯´æ˜ã€‚ç”µè„‘ç«¯å¯ä»¥å¼€å¯æ‹–æ‹½åŒºåŸŸè‡ªå·±æ‘†å¡ç‰‡ç©ã€‚
        </p>
      </div>
    </section>

    <!-- é¡µé¢ 2ï¼šå‘¨æŠ¥è®°å½• -->
    <section class="page" id="page-weekly">
      <div class="grid-two">
        <!-- å·¦ä¾§ï¼šè¾“å…¥ä¸åˆ—è¡¨ -->
        <div class="card">
          <h3>ğŸ“ ä»Šæ—¥è®°å½•</h3>
          <p class="desc">æƒ³åˆ°å°±è®°ä¸€æ¡ã€‚æœ¬å‘¨æ‰€æœ‰è®°å½•éƒ½ä¼šè‡ªåŠ¨ä¿å­˜åœ¨æµè§ˆå™¨é‡Œï¼Œå‘¨æœ«ä¸€é”®å¯¼å‡ºç»™ AI å†™å‘¨æŠ¥ã€‚</p>
          <div class="field-row">
            <div>
              <label for="log-date">æ—¥æœŸ</label>
              <input type="date" id="log-date" />
            </div>
            <div>
              <label for="log-project">é¡¹ç›®/æ–¹å‘</label>
              <select id="log-project">
                <option value="é‡åŒ–äº¤æ˜“">é‡åŒ–äº¤æ˜“</option>
                <option value="è‡ªåŠ¨åŒ–/å·¥ä½œæµ">è‡ªåŠ¨åŒ–/å·¥ä½œæµ</option>
                <option value="Web/æ§åˆ¶å°">Web/æ§åˆ¶å°</option>
                <option value="å­¦ä¹ /é˜…è¯»">å­¦ä¹ /é˜…è¯»</option>
                <option value="å…¶ä»–">å…¶ä»–</option>
              </select>
            </div>
            <div>
              <label for="log-type">ç±»å‹</label>
              <select id="log-type">
                <option value="å¼€å‘/å®ç°">å¼€å‘/å®ç°</option>
                <option value="è°ƒç ”/å­¦ä¹ ">è°ƒç ”/å­¦ä¹ </option>
                <option value="å¤ç›˜/æ€»ç»“">å¤ç›˜/æ€»ç»“</option>
                <option value="ä¼šè®®/æ²Ÿé€š">ä¼šè®®/æ²Ÿé€š</option>
                <option value="æ‚é¡¹/äº‹åŠ¡">æ‚é¡¹/äº‹åŠ¡</option>
              </select>
            </div>
          </div>

          <label for="log-content">å…·ä½“å†…å®¹</label>
          <textarea id="log-content" placeholder="ä¾‹å¦‚ï¼šå®Œæˆ 30 åˆ†é’Ÿè¶‹åŠ¿ç­–ç•¥çš„ç¬¬ä¸€ç‰ˆå›æµ‹ï¼Œå‘ç°æ»‘ç‚¹å¯¹é«˜é¢‘ç­–ç•¥å½±å“æå¤§ã€‚"></textarea>

          <label for="log-duration">è€—æ—¶ï¼ˆå°æ—¶ï¼Œå¯é€‰ï¼‰</label>
          <input type="number" id="log-duration" step="0.5" min="0" placeholder="ä¾‹å¦‚ï¼š1.5" />

          <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;">
            <button class="btn btn-primary" id="btn-add-log">+ è¿½åŠ ä¸€æ¡è®°å½•</button>
            <button class="btn btn-ghost" id="btn-clear-week">æ¸…ç©ºæœ¬å‘¨è®°å½•</button>
          </div>

          <p class="hint">æ•°æ®å­˜å‚¨åœ¨æœ¬æœºæµè§ˆå™¨ localStorageï¼Œåªåœ¨ä½ è¿™å°è®¾å¤‡ç”Ÿæ•ˆã€‚å¦‚æœæ¢ç”µè„‘ï¼Œè®°å¾—å¯¼å‡ºæ–‡æœ¬ä¿å­˜ã€‚</p>

          <div class="log-list" id="log-list"></div>
        </div>

        <!-- å³ä¾§ï¼šå‘¨æŠ¥å¯¼å‡º -->
        <div class="card">
          <h3>ğŸ“¤ æœ¬å‘¨å‘¨æŠ¥è‰ç¨¿</h3>
          <p class="desc">
            ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨æŠŠå½“å‰å‘¨çš„è®°å½•æ•´ç†æˆä¸€ä»½ã€Œç»™ AI çš„è¾“å…¥æ–‡æ¡ˆã€ï¼Œä½ å¤åˆ¶æ•´æ®µå‘ç»™æˆ‘æˆ–å‘ç»™å¤§æ¨¡å‹ï¼Œå°±èƒ½ç”Ÿæˆæ­£å¼å‘¨æŠ¥ã€‚
          </p>

          <button class="btn btn-primary" id="btn-generate-export">ğŸ” ç”Ÿæˆæœ¬å‘¨æ±‡æ€»æ–‡æœ¬</button>
          <button class="btn btn-ghost" id="btn-copy-export">ğŸ“‹ ä¸€é”®å¤åˆ¶</button>

          <div class="export-area">
            <label>æœ¬å‘¨è®°å½•æ•´åˆæ–‡æœ¬ï¼ˆå¯ç›´æ¥ç»™ AI ä½¿ç”¨ï¼‰</label>
            <textarea id="export-text" placeholder="ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®åï¼Œè¿™é‡Œä¼šè‡ªåŠ¨ç”Ÿæˆæœ¬å‘¨çš„ç»“æ„åŒ–æ–‡æœ¬ï¼Œç”¨æ¥äº¤ç»™ AI å†™å‘¨æŠ¥ã€‚"></textarea>
          </div>

          <div class="hint">
            å»ºè®®å›ºå®šä½¿ç”¨ä¸‹é¢è¿™æ ·çš„æç¤ºè¯ï¼ˆPromptï¼‰å‘ç»™æˆ‘æˆ–å‘ç»™ä»»æ„å¤§æ¨¡å‹ï¼š<br />
            <code style="font-size:11px;">
              ã€Œä¸‹é¢æ˜¯æˆ‘è¿™ä¸€å‘¨çš„å·¥ä½œè®°å½•ï¼Œè¯·å¸®æˆ‘å†™ä¸€ä»½æ­£å¼çš„å‘¨æŠ¥ï¼Œç»“æ„åŒ…å«ï¼šæœ¬å‘¨æ¦‚è§ˆã€åˆ†é¡¹ç›®å·¥ä½œå†…å®¹ã€æœ¬å‘¨äº®ç‚¹ã€ä¸‹å‘¨è®¡åˆ’ï¼Œè¯­æ°”ä¸“ä¸šç®€æ´ã€‚ã€
            </code>
          </div>
        </div>
      </div>
    </section>

    <!-- é¡µé¢ 3ï¼šä½¿ç”¨è¯´æ˜ -->
    <section class="page" id="page-help">
      <div class="card">
        <h3>âš™ï¸ ä½¿ç”¨è¯´æ˜</h3>
        <p class="desc">è¿™æ˜¯ä½ è‡ªç”¨çš„ã€Œä¸ªäººæˆé•¿æ§åˆ¶å°ã€ï¼Œåé¢å¯ä»¥æ…¢æ…¢è¿›åŒ–æˆä½ çš„äº¤æ˜“/ç”Ÿæ´» OSã€‚</p>
        <ol class="steps-list">
          <li>ğŸ—ºï¸ <b>æˆé•¿è·¯çº¿å›¾</b><span class="badge">è·¯çº¿æ¸…æ™°</span><br/>ç‚¹å‡»è“è‰²ä¸»èŠ‚ç‚¹ï¼Œå±•å¼€/æŠ˜å å¯¹ä½ ç°é˜¶æ®µæœ€æ ¸å¿ƒçš„ä¸‰æ¡çº¿ï¼šé‡åŒ–äº¤æ˜“ã€æŠ€æœ¯æ ˆã€è®¤çŸ¥æˆé•¿ã€‚</li>
          <li>ğŸ“ <b>å‘¨æŠ¥è®°å½•</b><span class="badge">V1 åŠè‡ªåŠ¨</span><br/>æ¯å¤©å·¥ä½œç»“æŸå‰ï¼Œç”¨ã€Œä»Šæ—¥è®°å½•ã€åŒºåŸŸç®€å•å†™ 1ï½3 è¡Œè¦ç‚¹ï¼›å‘¨æœ«ç‚¹å‡»ã€Œç”Ÿæˆæœ¬å‘¨æ±‡æ€»æ–‡æœ¬ã€ï¼Œå¤åˆ¶å‘ç»™ AI ç”Ÿæˆæ­£å¼å‘¨æŠ¥ã€‚</li>
          <li>ğŸ’¾ <b>æ•°æ®å­˜å‚¨</b><br/>ç›®å‰æ‰€æœ‰è®°å½•ä¿å­˜åœ¨æµè§ˆå™¨ localStorage ä¸­ï¼Œåªåœ¨æœ¬æœºç”Ÿæ•ˆï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ï¼Œé€‚åˆä¸ªäººä½¿ç”¨ã€‚</li>
          <li>ğŸ“² <b>æ”¾åˆ°æ¡Œé¢å½“å°åº”ç”¨</b><br/>
            - Macï¼šç”¨æµè§ˆå™¨æ‰“å¼€æœ¬é¡µ â†’ é€šè¿‡æµè§ˆå™¨èœå•ã€Œæ·»åŠ åˆ° Dockã€æˆ–åˆ›å»ºå¿«æ·æ–¹å¼ã€‚<br/>
            - iPhoneï¼šéƒ¨ç½²åˆ° GitHub Pages / ç½‘ç›˜åï¼Œç”¨ Safari æ‰“å¼€é“¾æ¥ â†’ åˆ†äº« â†’ æ·»åŠ åˆ°ä¸»å±å¹•ã€‚
          </li>
          <li>ğŸš€ <b>æœªæ¥å‡çº§æ–¹å‘</b><br/>
            - æ¥å…¥æ‰£å­ï¼šæŠŠå‘¨æŠ¥è®°å½•å†™å…¥æ•°æ®åº“ï¼Œç”±å·¥ä½œæµå®šæ—¶è§¦å‘ç”Ÿæˆå‘¨æŠ¥ã€‚<br/>
            - æ¥å…¥äº¤æ˜“æ•°æ®ï¼šåœ¨æ–°é¡µé¢å±•ç¤ºèµ„é‡‘æ›²çº¿ã€äº¤æ˜“ç»Ÿè®¡ã€‚<br/>
            - æ¥å…¥æ™ºèƒ½ä½“ï¼šæŸä¸ªæŒ‰é’®ä¸€æŒ‰ï¼Œå°±è·‘ä¸€æ•´æ¡ã€Œå¯¼å‡ºäº¤æ˜“ â†’ ç»Ÿè®¡ â†’ ç”Ÿæˆå¤ç›˜ã€é“¾è·¯ã€‚</li>
        </ol>
      </div>
    </section>
  </main>
</div>

<script>
  // ========== å¯¼èˆªåˆ‡æ¢ ==========
  const navButtons = document.querySelectorAll(".nav-btn");
  const pages = document.querySelectorAll(".page");

  navButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const targetId = btn.getAttribute("data-page");
      navButtons.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");
      pages.forEach((p) => {
        p.classList.toggle("active", p.id === targetId);
      });
    });
  });

  // ========== æ€ç»´å¯¼å›¾å±•å¼€/æ”¶èµ· + indicator ==========
  document.querySelectorAll(".node.main").forEach((node) => {
    node.addEventListener("click", () => {
      const id = node.getAttribute("data-node");
      const children = document.getElementById(id);
      const indicator = node.querySelector(".node-toggle-indicator");
      const isOpen = children.classList.contains("open");
      children.classList.toggle("open", !isOpen);
      node.classList.toggle("open", !isOpen);
      indicator.textContent = isOpen ? "+" : "â€“";
    });
  });

  // ========== å‘¨æŠ¥è®°å½•ï¼šlocalStorage ç®¡ç† ==========
  const STORAGE_KEY = "weeklyLogs_v1";

  function getTodayDateStr() {
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth() + 1).padStart(2, "0");
    const day = String(d.getDate()).padStart(2, "0");
    return `${y}-${m}-${day}`;
  }

  function loadLogs() {
    try {
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    } catch (e) {
      return [];
    }
  }

  function saveLogs(logs) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(logs));
  }

  function getWeekRange(dateStr) {
    const d = new Date(dateStr);
    const day = d.getDay() || 7; // å‘¨ä¸€åˆ°å‘¨æ—¥
    const monday = new Date(d);
    monday.setDate(d.getDate() - (day - 1));
    const sunday = new Date(monday);
    sunday.setDate(monday.getDate() + 6);
    const fmt = (dt) =>
      `${dt.getFullYear()}-${String(dt.getMonth() + 1).padStart(2, "0")}-${String(
        dt.getDate()
      ).padStart(2, "0")}`;
    return { start: fmt(monday), end: fmt(sunday) };
  }

  const dateInput = document.getElementById("log-date");
  const projectInput = document.getElementById("log-project");
  const typeInput = document.getElementById("log-type");
  const contentInput = document.getElementById("log-content");
  const durationInput = document.getElementById("log-duration");
  const logListEl = document.getElementById("log-list");
  const btnAddLog = document.getElementById("btn-add-log");
  const btnClearWeek = document.getElementById("btn-clear-week");
  const btnGenerateExport = document.getElementById("btn-generate-export");
  const btnCopyExport = document.getElementById("btn-copy-export");
  const exportTextArea = document.getElementById("export-text");

  dateInput.value = getTodayDateStr();

  let logs = loadLogs();

  function renderLogs() {
    if (!logs.length) {
      logListEl.innerHTML = '<p class="hint">è¿˜æ²¡æœ‰è®°å½•ã€‚å…ˆå†™ä¸€ä¸¤æ¡è¯•è¯•ï¼Œæ„Ÿå—ä¸€ä¸‹èŠ‚çœè„‘åŠ›çš„æ„Ÿè§‰ã€‚</p>';
      return;
    }
    // æŒ‰æ—¥æœŸæ’åº
    const sorted = [...logs].sort((a, b) => (a.date > b.date ? 1 : -1));
    let html = "";
    let lastDate = "";
    sorted.forEach((log) => {
      if (log.date !== lastDate) {
        html += `<div class="log-item-date">ğŸ“… ${log.date}</div>`;
        lastDate = log.date;
      }
      html += `<div class="log-item">
        <span class="pill">${log.project}</span>
        <span class="pill" style="background:#fee2e2;color:#991b1b;">${log.type}</span>
        ${log.content || ""}
        ${log.duration ? `ï¼ˆçº¦ ${log.duration}hï¼‰` : ""}
      </div>`;
    });
    logListEl.innerHTML = html;
  }

  btnAddLog.addEventListener("click", () => {
    const date = dateInput.value || getTodayDateStr();
    const project = projectInput.value;
    const type = typeInput.value;
    const content = contentInput.value.trim();
    const duration = durationInput.value.trim();

    if (!content) {
      alert("å…ˆéšä¾¿å†™ä¸€å¥ä»Šå¤©åšäº†ä»€ä¹ˆå§ï¼Œä¸ç”¨è¿½æ±‚å®Œç¾ã€‚");
      return;
    }
    logs.push({
      date,
      project,
      type,
      content,
      duration: duration ? Number(duration) : null,
    });
    saveLogs(logs);
    renderLogs();
    contentInput.value = "";
    durationInput.value = "";
  });

  btnClearWeek.addEventListener("click", () => {
    if (!confirm("ç¡®å®šæ¸…ç©ºæ‰€æœ‰è®°å½•å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ¢å¤ã€‚")) return;
    logs = [];
    saveLogs(logs);
    renderLogs();
  });

  btnGenerateExport.addEventListener("click", () => {
    if (!logs.length) {
      alert("æœ¬å‘¨è¿˜æ²¡æœ‰è®°å½•å“¦ï¼Œå…ˆå†™å‡ æ¡å†ç”Ÿæˆå§ã€‚");
      return;
    }
    const today = getTodayDateStr();
    const { start, end } = getWeekRange(today);
    const inWeek = logs.filter((log) => log.date >= start && log.date <= end);
    if (!inWeek.length) {
      alert("å½“å‰å‘¨å†…æš‚æ—¶æ²¡æœ‰è®°å½•ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æ—¥æœŸé€‰é”™äº†ã€‚");
      return;
    }
    // æŒ‰é¡¹ç›®åˆ†ç»„
    const byProject = {};
    inWeek.forEach((log) => {
      if (!byProject[log.project]) byProject[log.project] = [];
      byProject[log.project].push(log);
    });

    let text = `ã€æœ¬å‘¨æ—¶é—´èŒƒå›´ã€‘${start} ~ ${end}\n\nã€æœ¬å‘¨æŒ‰é¡¹ç›®åˆ†ç±»çš„å·¥ä½œè®°å½•ã€‘\n\n`;
    Object.keys(byProject).forEach((project) => {
      text += `ã€é¡¹ç›®ï¼š${project}ã€‘\n`;
      const arr = byProject[project].sort((a, b) => (a.date > b.date ? 1 : -1));
      arr.forEach((log, idx) => {
        text += `${idx + 1}. ${log.date} - ${log.type}ï¼š${log.content}`;
        if (log.duration) text += `ï¼ˆçº¦ ${log.duration} å°æ—¶ï¼‰`;
        text += "\n";
      });
      text += "\n";
    });

    text += "ã€å¤‡æ³¨ã€‘ä»¥ä¸Šæ˜¯æœ¬å‘¨åŸå§‹å·¥ä½œè®°å½•ï¼Œå¸®æˆ‘å†™å‘¨æŠ¥æ—¶å¯æ®æ­¤è¿›è¡Œå½’çº³ã€æç‚¼å’Œç»“æ„åŒ–æ•´ç†ã€‚";

    exportTextArea.value = text;
  });

  btnCopyExport.addEventListener("click", () => {
    if (!exportTextArea.value.trim()) {
      alert("å…ˆç‚¹å‡»â€œç”Ÿæˆæœ¬å‘¨æ±‡æ€»æ–‡æœ¬â€å†å¤åˆ¶ã€‚");
      return;
    }
    exportTextArea.select();
    document.execCommand("copy");
    alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç›´æ¥ç²˜è´´ç»™ AI å°±è¡Œå•¦ã€‚");
  });

  renderLogs();

  // ========== ç”µè„‘ç«¯æ‹–æ‹½å°ç©å…· ==========
  if (window.innerWidth >= 900) {
    document.getElementById("free-layout").style.display = "block";
    const drags = document.querySelectorAll(".mindmap-free-layout .draggable");
    drags.forEach((el) => {
      let offsetX = 0;
      let offsetY = 0;
      let dragging = false;

      el.addEventListener("mousedown", (e) => {
        dragging = true;
        offsetX = e.clientX - el.offsetLeft;
        offsetY = e.clientY - el.offsetTop;
        el.style.zIndex = "10";
      });

      document.addEventListener("mousemove", (e) => {
        if (!dragging) return;
        el.style.left = e.clientX - offsetX + "px";
        el.style.top = e.clientY - offsetY + "px";
      });

      document.addEventListener("mouseup", () => {
        dragging = false;
        el.style.zIndex = "1";
      });
    });
  }
</script>
</body>
</html>